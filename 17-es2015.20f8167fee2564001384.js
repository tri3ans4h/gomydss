(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{MXMs:function(e,t,n){"use strict";n.r(t),n.d(t,"AkunModule",(function(){return Se}));var a=n("PCNd"),i=n("3Pt+"),l=n("CzEO"),r=n("PQ0Y"),s=n("lp9o"),o=n("mLsC"),d=n("OzZK"),m=n("JA5x"),c=n("ZE2D"),p=n("L1u3"),h=n("SKKP"),u=n("W9fG"),g=n("bE2y"),S=n("rMZv"),k=n("Nqz0"),E=n("ncdi"),b=n("ix5O"),f=n("oyxB"),z=n("ZyQt"),x=n("Ff2k"),v=n("Py9c"),y=n("nJia"),_=n("ocnv"),L=n("dEAy"),w=n("zAKX"),j=n("D9mS"),O=n("PTRe"),C=n("3/1E"),T=n("0lU3"),I=n("TaO5"),R=n("PScX"),V=n("m3o8"),F=n("tyNb"),N=n("2Vo4"),D=n("EUZL"),A=n("KHAO"),J=n("fXoL"),P=n("nm5K"),M=n("qAZ0"),U=n("4xsP"),K=n("ofXK"),G=n("C2AL"),q=n("RwU8"),B=n("FwiY"),H=n("B+r4"),$=n("Q8cG");function X(e,t){1&e&&J["\u0275\u0275element"](0,"i",19)}function Z(e,t){if(1&e&&J["\u0275\u0275element"](0,"nz-option",22),2&e){const e=t.$implicit;J["\u0275\u0275property"]("nzValue",e.kode)("nzLabel",e.nama)}}function Y(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"nz-space-item"),J["\u0275\u0275elementStart"](2,"nz-select",20),J["\u0275\u0275listener"]("ngModelChange",(function(t){return J["\u0275\u0275restoreView"](e),J["\u0275\u0275nextContext"]().SelectedListJenjang=t}))("ngModelChange",(function(){return J["\u0275\u0275restoreView"](e),J["\u0275\u0275nextContext"]().FillCurentJenjang()})),J["\u0275\u0275template"](3,Z,1,2,"nz-option",21),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](2),J["\u0275\u0275property"]("ngModel",e.SelectedListJenjang),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngForOf",e.JenjangSekolah)}}function Q(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275elementStart"](8,"a",10),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).TampilSiswaUser(n)})),J["\u0275\u0275element"](9,"i",29),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.npsn),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nm_sekolah)}}function W(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275text"](8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](9,"td"),J["\u0275\u0275text"](10),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"td"),J["\u0275\u0275text"](12),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"td"),J["\u0275\u0275elementStart"](14,"a",30),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).deleteItem(n.id)})),J["\u0275\u0275element"](15,"i",31),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nisn),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.username),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nama_lengkap),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.jenis_kelamin),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.tanggal_lahir)}}function ee(e,t){if(1&e&&(J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"div",3),J["\u0275\u0275elementStart"](2,"div",4),J["\u0275\u0275elementStart"](3,"nz-card",23),J["\u0275\u0275elementStart"](4,"nz-spin",24),J["\u0275\u0275elementStart"](5,"nz-table",25,26),J["\u0275\u0275elementStart"](7,"thead"),J["\u0275\u0275elementStart"](8,"tr"),J["\u0275\u0275elementStart"](9,"th"),J["\u0275\u0275text"](10,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"th"),J["\u0275\u0275text"](12,"NPSN"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"th"),J["\u0275\u0275text"](14,"NAMA SEKOLAH "),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](15,"th"),J["\u0275\u0275text"](16,"Aksi"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](17,"tbody"),J["\u0275\u0275template"](18,Q,10,3,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](19,"div",4),J["\u0275\u0275elementStart"](20,"nz-card",23),J["\u0275\u0275elementStart"](21,"nz-space"),J["\u0275\u0275elementStart"](22,"nz-space-item"),J["\u0275\u0275text"](23),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](24,"nz-spin",24),J["\u0275\u0275elementStart"](25,"nz-table",25,28),J["\u0275\u0275elementStart"](27,"thead"),J["\u0275\u0275elementStart"](28,"tr"),J["\u0275\u0275elementStart"](29,"th"),J["\u0275\u0275text"](30,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](31,"th"),J["\u0275\u0275text"](32,"NISN"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](33,"th"),J["\u0275\u0275text"](34,"Username"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](35,"th"),J["\u0275\u0275text"](36,"Nama"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](37,"th"),J["\u0275\u0275text"](38,"Jenis Kelamin"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](39,"th"),J["\u0275\u0275text"](40,"Tanggal Lahir"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275element"](41,"th"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](42,"tbody"),J["\u0275\u0275template"](43,W,16,6,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()),2&e){const e=J["\u0275\u0275reference"](6),t=J["\u0275\u0275reference"](26),n=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](4),J["\u0275\u0275property"]("nzSpinning",n.isLoadingTableRegisterSekolah),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",n.RegisteredSekolahData),J["\u0275\u0275advance"](13),J["\u0275\u0275property"]("ngForOf",e.data),J["\u0275\u0275advance"](5),J["\u0275\u0275textInterpolate1"](" Total Data : ",n.projectList.length," "),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzSpinning",n.isLoadingTableAkun),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",n.projectList),J["\u0275\u0275advance"](18),J["\u0275\u0275property"]("ngForOf",t.data)}}function te(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275text"](8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](9,"td"),J["\u0275\u0275text"](10),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"td"),J["\u0275\u0275text"](12),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"td",32),J["\u0275\u0275elementStart"](14,"div"),J["\u0275\u0275elementStart"](15,"a",33),J["\u0275\u0275element"](16,"i",34),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](17,"nz-dropdown-menu",null,35),J["\u0275\u0275elementStart"](19,"ul",36),J["\u0275\u0275elementStart"](20,"li",37),J["\u0275\u0275elementStart"](21,"a",38),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).deleteItem(n.id)})),J["\u0275\u0275element"](22,"i",39),J["\u0275\u0275elementStart"](23,"span",40),J["\u0275\u0275text"](24,"Delete"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=J["\u0275\u0275reference"](18);J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nisn),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.username),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nama_lengkap),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.jenis_kelamin),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.tanggal_lahir),J["\u0275\u0275advance"](3),J["\u0275\u0275property"]("nzDropdownMenu",a)}}function ne(e,t){if(1&e&&(J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"nz-card",23),J["\u0275\u0275elementStart"](2,"nz-space"),J["\u0275\u0275elementStart"](3,"nz-space-item"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"nz-spin",24),J["\u0275\u0275elementStart"](6,"nz-table",25,28),J["\u0275\u0275elementStart"](8,"thead"),J["\u0275\u0275elementStart"](9,"tr"),J["\u0275\u0275elementStart"](10,"th"),J["\u0275\u0275text"](11,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](12,"th"),J["\u0275\u0275text"](13,"NISN"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](14,"th"),J["\u0275\u0275text"](15,"Username"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](16,"th"),J["\u0275\u0275text"](17,"Nama"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](18,"th"),J["\u0275\u0275text"](19,"Jenis Kelamin"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](20,"th"),J["\u0275\u0275text"](21,"Tanggal Lahir"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275element"](22,"th"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](23,"tbody"),J["\u0275\u0275template"](24,te,25,7,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()),2&e){const e=J["\u0275\u0275reference"](7),t=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](4),J["\u0275\u0275textInterpolate1"](" Total Data : ",t.projectList.length," "),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzSpinning",t.isLoadingTableAkun),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",t.projectList),J["\u0275\u0275advance"](18),J["\u0275\u0275property"]("ngForOf",e.data)}}let ae=(()=>{class e{constructor(e,t,n,a,i,l){this.router=e,this.fb=t,this.msg=n,this.apiService=a,this.modalService=i,this.tablesvc=l,this.view="cardView",this.newProject=!1,this.projectListRaw=[],this.projectList=[],this.name="This is XLSX TO JSON CONVERTER",this.isLoadingTableRegisterSekolah=!1,this.isLoadingTableAkun=!1,this.willDownload=!1,this.loading=!1,this.isVisible=!1,this.isOkLoading=!1,this.JenjangSekolah=[{kode:"0",nama:"SD"},{kode:"1",nama:"SMP"},{kode:"2",nama:"SMA"},{kode:"3",nama:"SMK"}],this.RegisteredSekolahData=[],this.RegisteredSekolahDataRaw=[],this.KodeRole="",this.currentUserSubject=new N.a(JSON.parse(localStorage.getItem("AccessToken"))),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}ngOnInit(){var e=JSON.parse(this.currentUserValue.identitas);this.KodeRole=this.currentUserValue.kode_role,"002"==this.currentUserValue.kode_role?this.dataForm=this.fb.group({npsn:[null,[i.s.required]],id_gtk:[null,[i.s.required]],id_organisasi:[null,[i.s.required]]}):"005"==this.currentUserValue.kode_role&&(this.dataForm=this.fb.group({npsn:[e[0].npsn,[i.s.required]],id_gtk:[null,[i.s.required]],id_organisasi:[null,[i.s.required]]}),this.SelectedListJenjang=e[0].jenjang,this.initRegistrasiSekolah(),this.getSiswa())}checkMandatoryField(e,t){let n=[];for(let i=0;i<t.length;i++){let a=!0;for(let n=0;n<e.length;n++)null==t[i][e[n]]&&(a=!1);n.push(a)}let a=!0;for(let i=0;i<n.length;i++)if(0==n[i]){a=!1;break}return a}FillCurentJenjang(){this.initRegistrasiSekolah()}initRegistrasiSekolah(){this.isLoadingTableRegisterSekolah=!0;let e={nama_fungsi:"sekolah.init_registrasi_sekolah",in_data:JSON.stringify({jenjang:this.SelectedListJenjang})};this.apiService.postFunction(e).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.RegisteredSekolahData=t,this.RegisteredSekolahDataRaw=t,this.isLoadingTableRegisterSekolah=!1},e=>{this.isLoadingTableRegisterSekolah=!1,this.modalService.closeAll(),this.RegisteredSekolahData=[],this.RegisteredSekolahDataRaw=[]})}TampilSiswaUser(e){this.getSiswa2(e.npsn)}getSiswa2(e){this.isLoadingTableAkun=!0,JSON.parse(this.currentUserValue.identitas);let t={nama_fungsi:"_dss_list",in_data:JSON.stringify({table:"public.vpeserta_didik",key:{npsn:e}})};this.apiService.postFunction(t).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.projectList=t,this.projectListRaw=t,this.isLoadingTableAkun=!1},e=>{this.msg.info("Koneksi tidak stabil untuk melakukan pengambilan data."),this.projectList=[],this.projectListRaw=[],this.isLoadingTableAkun=!1})}getSiswa(){this.isLoadingTableAkun=!0;var e=JSON.parse(this.currentUserValue.identitas);let t={nama_fungsi:"_dss_list",in_data:JSON.stringify({table:"public.vpeserta_didik",key:{npsn:e[0].npsn}})};this.apiService.postFunction(t).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.projectList=t,this.projectListRaw=t,this.isLoadingTableAkun=!1},e=>{this.msg.info("Koneksi tidak stabil untuk melakukan pengambilan data."),this.projectList=[],this.projectListRaw=[],this.isLoadingTableAkun=!1})}onFileChange(e){let t=null,n=null;const a=new FileReader,i=e.target.files[0];a.onload=e=>{t=D.read(a.result,{type:"binary"}),n=t.SheetNames.reduce((e,n)=>(e[n]=D.utils.sheet_to_json(t.Sheets[n]),e),{});const i=JSON.stringify(n);this.setPostData(i)},a.readAsBinaryString(i)}setPostData(e){var t=JSON.parse(this.currentUserValue.identitas);let n=JSON.parse(e);var a=[];n.Sheet1.forEach(e=>{if(null!=e.nisn||null!=e.nama_lengkap||null!=e.tanggal_lahir){this.buildUserName(e.no,e.nama_lengkap),e.nisn=e.nisn+"";var n={nisn:e.nisn.replace(/[\u200B-\u200D\uFEFF]/g,""),nama_lengkap:e.nama_lengkap.replace(/['"]+/g,""),jenis_kelamin:e.jenis_kelamin,nik:null!=e.nik?e.nik.replace(/[\u200B-\u200D\uFEFF]/g,""):e.nik,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,nis:e.nis,tanggal_masuk:e.tanggal_masuk,npsn:t[0].npsn,username:e.nisn.replace(/[\u200B-\u200D\uFEFF]/g,"")+"@mydss.id",password:e.tanggal_lahir};a.push(n)}}),this.dataArrayPush=a}buildUserName(e,t){return t.toLowerCase().replace(".","").trim().split(" ").join(".").replace(/['"]+/g,"")+e+"@mydss.id"}setDownload(e){this.willDownload=!0,setTimeout(()=>{const t=document.querySelector("#download");t.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","xlsxtojson.json")},1e3)}search(){this.projectList=this.tablesvc.search(this.searchInput,this.projectListRaw)}showModal(){this.isVisible=!0}handleOk(){if(this.isOkLoading=!0,console.log(this.dataArrayPush),null==this.dataArrayPush)this.isOkLoading=!1,this.msg.error("Gagal Simpan!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.");else{let e={nama_fungsi:"_dss_import_peserta_didik",in_data:JSON.stringify(this.dataArrayPush)};this.apiService.postFunction(e).subscribe(e=>{this.msg.success("Berhasil Simpan!."),this.getSiswa(),this.isVisible=!1,this.isOkLoading=!1},e=>{this.isOkLoading=!1,this.msg.error("Gagal Simpan!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.")})}}handleCancel(){this.isVisible=!1}deleteItem(e){this.modalService.confirm({nzTitle:"Hapus data ini?",nzContent:'<b style="color: red;">Data tidak bisa dikembalikan</b>',nzOkText:"Yes",nzOkType:"danger",nzOnOk:()=>{let t={nama_fungsi:"_dss_delete",in_data:JSON.stringify({table:"gtk.organisasi",key:{id:e}})};this.apiService.postFunction(t).subscribe(e=>{this.msg.success("Berhasil Hapus!."),this.getSiswa()},e=>{this.msg.error("Gagal Hapus!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.")})},nzCancelText:"No",nzOnCancel:()=>console.log("Cancel")})}}return e.\u0275fac=function(t){return new(t||e)(J["\u0275\u0275directiveInject"](F.e),J["\u0275\u0275directiveInject"](i.e),J["\u0275\u0275directiveInject"](R.b),J["\u0275\u0275directiveInject"](P.a),J["\u0275\u0275directiveInject"](L.c),J["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=J["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:34,vars:8,consts:[[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-12"],[1,"border-input",3,"nzPrefix"],["type","text","nz-input","","placeholder","Cari Data",3,"ngModel","ngModelChange"],["searchPrefix",""],[4,"ngIf"],[1,"text-md-right","m-v-10"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","upload"],["nzWidth","800","nzTitle","Buat Baru",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","","nzLayout","vertical",3,"formGroup"],["target","_blank","nzType","primary","nz-button","","href","../../../assets/files/Formula_Import_Siswa.xlsx"],["nzRequired","","nzFor","id_gtk"],["nzErrorTip","Harap isi file!"],["type","file",1,"border-input",3,"change"],[1,"container-fluid"],["nz-icon","","nzType","search",1,"opacity-04"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Pilih Jenjang Sekolah",1,"border-input",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[1,"border-box"],["nzTip","Loading...",3,"nzSpinning"],["nzSize","small",3,"nzData"],["RegisteredSekolahListView",""],[4,"ngFor","ngForOf"],["listViewTable",""],["nz-icon","","nzType","contacts","nzTheme","outline"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"text-right"],["nz-dropdown","","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","theme","outline"],["projectListSetting2","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item",""],[3,"click"],["nz-icon","","nzType","delete","theme","outline"],[1,"m-l-10"]],template:function(e,t){if(1&e&&(J["\u0275\u0275elementStart"](0,"div",0),J["\u0275\u0275elementStart"](1,"div",1),J["\u0275\u0275elementStart"](2,"div",2),J["\u0275\u0275elementStart"](3,"div",3),J["\u0275\u0275elementStart"](4,"div",4),J["\u0275\u0275elementStart"](5,"nz-space"),J["\u0275\u0275elementStart"](6,"nz-space-item"),J["\u0275\u0275elementStart"](7,"nz-input-group",5),J["\u0275\u0275elementStart"](8,"input",6),J["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchInput=e}))("ngModelChange",(function(){return t.search()})),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275template"](9,X,1,0,"ng-template",null,7,J["\u0275\u0275templateRefExtractor"]),J["\u0275\u0275elementEnd"](),J["\u0275\u0275template"](11,Y,4,2,"ng-container",8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](12,"div",2),J["\u0275\u0275elementStart"](13,"div",9),J["\u0275\u0275elementStart"](14,"nz-button-group"),J["\u0275\u0275elementStart"](15,"button",10),J["\u0275\u0275listener"]("click",(function(){return t.showModal()})),J["\u0275\u0275element"](16,"i",11),J["\u0275\u0275elementStart"](17,"span"),J["\u0275\u0275text"](18,"Import Data"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](19,"nz-modal",12),J["\u0275\u0275listener"]("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()}))("nzOnOk",(function(){return t.handleOk()})),J["\u0275\u0275elementStart"](20,"form",13),J["\u0275\u0275elementStart"](21,"nz-form-item"),J["\u0275\u0275elementStart"](22,"nz-form-label"),J["\u0275\u0275text"](23,"Download Template"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](24,"a",14),J["\u0275\u0275text"](25,"Download"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](26,"nz-form-item"),J["\u0275\u0275elementStart"](27,"nz-form-label",15),J["\u0275\u0275text"](28,"Import File"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](29,"nz-form-control",16),J["\u0275\u0275elementStart"](30,"input",17),J["\u0275\u0275listener"]("change",(function(e){return t.onFileChange(e)})),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](31,"div",18),J["\u0275\u0275template"](32,ee,44,7,"ng-container",8),J["\u0275\u0275template"](33,ne,25,4,"ng-container",8),J["\u0275\u0275elementEnd"]()),2&e){const e=J["\u0275\u0275reference"](10);J["\u0275\u0275advance"](7),J["\u0275\u0275property"]("nzPrefix",e),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngModel",t.searchInput),J["\u0275\u0275advance"](3),J["\u0275\u0275property"]("ngIf","002"==t.KodeRole),J["\u0275\u0275advance"](8),J["\u0275\u0275property"]("nzVisible",t.isVisible)("nzOkLoading",t.isOkLoading),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("formGroup",t.dataForm),J["\u0275\u0275advance"](12),J["\u0275\u0275property"]("ngIf","002"==t.KodeRole),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngIf","005"==t.KodeRole)}},directives:[U.a,U.b,O.b,O.c,O.a,i.c,i.n,i.q,K.m,d.b,G.a,d.a,q.a,B.a,L.a,i.t,i.o,_.b,i.h,H.c,_.c,H.a,_.d,_.a,w.b,K.l,w.a,m.a,M.a,S.b,S.h,S.i,S.a,S.g,S.e,k.a,k.b,k.e,$.c,$.e],styles:[""],encapsulation:2}),e})();var ie=n("pr8b");function le(e,t){1&e&&J["\u0275\u0275element"](0,"i",19)}function re(e,t){if(1&e&&J["\u0275\u0275element"](0,"nz-option",22),2&e){const e=t.$implicit;J["\u0275\u0275property"]("nzValue",e.kode)("nzLabel",e.nama)}}function se(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"nz-space-item"),J["\u0275\u0275elementStart"](2,"nz-select",20),J["\u0275\u0275listener"]("ngModelChange",(function(t){return J["\u0275\u0275restoreView"](e),J["\u0275\u0275nextContext"]().SelectedListJenjang=t}))("ngModelChange",(function(){return J["\u0275\u0275restoreView"](e),J["\u0275\u0275nextContext"]().FillCurentJenjang()})),J["\u0275\u0275template"](3,re,1,2,"nz-option",21),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](2),J["\u0275\u0275property"]("ngModel",e.SelectedListJenjang),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngForOf",e.JenjangSekolah)}}function oe(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275elementStart"](8,"a",10),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).TampilGuruUser(n)})),J["\u0275\u0275element"](9,"i",29),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.npsn),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nm_sekolah)}}function de(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275text"](8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](9,"td"),J["\u0275\u0275text"](10),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"td"),J["\u0275\u0275text"](12),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"td"),J["\u0275\u0275text"](14),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](15,"td"),J["\u0275\u0275elementStart"](16,"a",30),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).deleteItem(n.id)})),J["\u0275\u0275element"](17,"i",31),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nik),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.username),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nama_lengkap),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.jenis_kelamin),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.tanggal_lahir),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.no_hp)}}function me(e,t){if(1&e&&(J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"div",3),J["\u0275\u0275elementStart"](2,"div",4),J["\u0275\u0275elementStart"](3,"nz-card",23),J["\u0275\u0275elementStart"](4,"nz-spin",24),J["\u0275\u0275elementStart"](5,"nz-table",25,26),J["\u0275\u0275elementStart"](7,"thead"),J["\u0275\u0275elementStart"](8,"tr"),J["\u0275\u0275elementStart"](9,"th"),J["\u0275\u0275text"](10,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"th"),J["\u0275\u0275text"](12,"NPSN"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"th"),J["\u0275\u0275text"](14,"NAMA SEKOLAH "),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](15,"th"),J["\u0275\u0275text"](16,"Aksi"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](17,"tbody"),J["\u0275\u0275template"](18,oe,10,3,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](19,"div",4),J["\u0275\u0275elementStart"](20,"nz-card",23),J["\u0275\u0275elementStart"](21,"nz-space"),J["\u0275\u0275elementStart"](22,"nz-space-item"),J["\u0275\u0275text"](23),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](24,"nz-spin",24),J["\u0275\u0275elementStart"](25,"nz-table",25,28),J["\u0275\u0275elementStart"](27,"thead"),J["\u0275\u0275elementStart"](28,"tr"),J["\u0275\u0275elementStart"](29,"th"),J["\u0275\u0275text"](30,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](31,"th"),J["\u0275\u0275text"](32,"NIK"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](33,"th"),J["\u0275\u0275text"](34,"Username"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](35,"th"),J["\u0275\u0275text"](36,"Nama"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](37,"th"),J["\u0275\u0275text"](38,"Jenis Kelamin"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](39,"th"),J["\u0275\u0275text"](40,"Tanggal Lahir"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](41,"th"),J["\u0275\u0275text"](42,"No HP"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275element"](43,"th"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](44,"tbody"),J["\u0275\u0275template"](45,de,18,7,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()),2&e){const e=J["\u0275\u0275reference"](6),t=J["\u0275\u0275reference"](26),n=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](4),J["\u0275\u0275property"]("nzSpinning",n.isLoadingTableRegisterSekolah),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",n.RegisteredSekolahData),J["\u0275\u0275advance"](13),J["\u0275\u0275property"]("ngForOf",e.data),J["\u0275\u0275advance"](5),J["\u0275\u0275textInterpolate1"](" Total Data : ",n.projectList.length," "),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzSpinning",n.isLoadingTableAkun),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",n.projectList),J["\u0275\u0275advance"](20),J["\u0275\u0275property"]("ngForOf",t.data)}}function ce(e,t){if(1&e){const e=J["\u0275\u0275getCurrentView"]();J["\u0275\u0275elementStart"](0,"tr"),J["\u0275\u0275elementStart"](1,"td"),J["\u0275\u0275text"](2),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](3,"td"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"td"),J["\u0275\u0275text"](6),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](7,"td"),J["\u0275\u0275text"](8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](9,"td"),J["\u0275\u0275text"](10),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](11,"td"),J["\u0275\u0275text"](12),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](13,"td"),J["\u0275\u0275text"](14),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](15,"td"),J["\u0275\u0275elementStart"](16,"a",30),J["\u0275\u0275listener"]("click",(function(){J["\u0275\u0275restoreView"](e);const n=t.$implicit;return J["\u0275\u0275nextContext"](2).deleteItem(n.id)})),J["\u0275\u0275element"](17,"i",31),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](n+1),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nik),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.username),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.nama_lengkap),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.jenis_kelamin),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.tanggal_lahir),J["\u0275\u0275advance"](2),J["\u0275\u0275textInterpolate"](e.no_hp)}}function pe(e,t){if(1&e&&(J["\u0275\u0275elementContainerStart"](0),J["\u0275\u0275elementStart"](1,"nz-card",23),J["\u0275\u0275elementStart"](2,"nz-space"),J["\u0275\u0275elementStart"](3,"nz-space-item"),J["\u0275\u0275text"](4),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](5,"nz-spin",24),J["\u0275\u0275elementStart"](6,"nz-table",25,28),J["\u0275\u0275elementStart"](8,"thead"),J["\u0275\u0275elementStart"](9,"tr"),J["\u0275\u0275elementStart"](10,"th"),J["\u0275\u0275text"](11,"No"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](12,"th"),J["\u0275\u0275text"](13,"NIK"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](14,"th"),J["\u0275\u0275text"](15,"Username"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](16,"th"),J["\u0275\u0275text"](17,"Nama"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](18,"th"),J["\u0275\u0275text"](19,"Jenis Kelamin"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](20,"th"),J["\u0275\u0275text"](21,"Tanggal Lahir"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](22,"th"),J["\u0275\u0275text"](23,"No HP"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275element"](24,"th"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](25,"tbody"),J["\u0275\u0275template"](26,ce,18,7,"tr",27),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementContainerEnd"]()),2&e){const e=J["\u0275\u0275reference"](7),t=J["\u0275\u0275nextContext"]();J["\u0275\u0275advance"](4),J["\u0275\u0275textInterpolate1"](" Total Data : ",t.projectList.length," "),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzSpinning",t.isLoadingTableAkun),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("nzData",t.projectList),J["\u0275\u0275advance"](20),J["\u0275\u0275property"]("ngForOf",e.data)}}const he=[{path:"list-student",component:ae,data:{title:"List Siswa",headerDisplay:"none"}},{path:"list-teacher",component:(()=>{class e{constructor(e,t,n,a,i,l){this.router=e,this.fb=t,this.msg=n,this.apiService=a,this.modalService=i,this.tablesvc=l,this.view="cardView",this.newProject=!1,this.projectListRaw=[],this.projectList=[],this.name="This is XLSX TO JSON CONVERTER",this.willDownload=!1,this.loading=!1,this.isLoadingTableRegisterSekolah=!1,this.isLoadingTableAkun=!1,this.isVisible=!1,this.isOkLoading=!1,this.JenjangSekolah=[{kode:"0",nama:"SD"},{kode:"1",nama:"SMP"},{kode:"2",nama:"SMA"},{kode:"3",nama:"SMK"}],this.RegisteredSekolahData=[],this.RegisteredSekolahDataRaw=[],this.currentUserSubject=new N.a(JSON.parse(localStorage.getItem("AccessToken"))),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}ngOnInit(){var e=JSON.parse(this.currentUserValue.identitas);this.KodeRole=this.currentUserValue.kode_role,"002"==this.currentUserValue.kode_role?this.dataForm=this.fb.group({npsn:[null,[i.s.required]],id_gtk:[null,[i.s.required]],id_organisasi:[null,[i.s.required]]}):"005"==this.currentUserValue.kode_role&&(this.dataForm=this.fb.group({npsn:[e[0].npsn,[i.s.required]],id_gtk:[null,[i.s.required]],id_organisasi:[null,[i.s.required]]}),this.getGuru())}exportData(){var e=1,t=[];this.projectList.forEach(n=>{var a={No:e,Nama:n.nama_lengkap,Username:n.username,Password:n.tanggal_lahir};e++,t.push(a)}),ie.a.exportAsExcelFile(t,"Data Guru")}TampilGuruUser(e){this.getGuru2(e.npsn)}getGuru(){this.isLoadingTableAkun=!0;var e=JSON.parse(this.currentUserValue.identitas);let t={nama_fungsi:"_dss_list",in_data:JSON.stringify({table:"public.vgtk",key:{npsn:e[0].npsn}})};this.apiService.postFunction(t).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.projectList=t,this.projectListRaw=t,this.isLoadingTableAkun=!1},e=>{this.msg.info("Koneksi tidak stabil untuk melakukan pengambilan data."),this.projectList=[],this.projectListRaw=[],this.isLoadingTableAkun=!1})}getGuru2(e){this.isLoadingTableAkun=!0,JSON.parse(this.currentUserValue.identitas);let t={nama_fungsi:"_dss_list",in_data:JSON.stringify({table:"public.vgtk",key:{npsn:e}})};this.apiService.postFunction(t).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.projectList=t,this.projectListRaw=t,this.isLoadingTableAkun=!1},e=>{this.msg.info("Koneksi tidak stabil untuk melakukan pengambilan data."),this.projectList=[],this.projectListRaw=[],this.isLoadingTableAkun=!1})}FillCurentJenjang(){this.initRegistrasiSekolah()}initRegistrasiSekolah(){this.isLoadingTableRegisterSekolah=!0;let e={nama_fungsi:"sekolah.init_registrasi_sekolah",in_data:JSON.stringify({jenjang:this.SelectedListJenjang})};this.apiService.postFunction(e).subscribe(e=>{let t=A.a.ParseResponse(e.out_data);this.RegisteredSekolahData=t,this.RegisteredSekolahDataRaw=t,this.isLoadingTableRegisterSekolah=!1},e=>{this.modalService.closeAll(),this.RegisteredSekolahData=[],this.RegisteredSekolahDataRaw=[],this.isLoadingTableRegisterSekolah=!1})}onFileChange(e){let t=null,n=null;const a=new FileReader,i=e.target.files[0];a.onload=e=>{try{t=D.read(a.result,{type:"binary"}),n=t.SheetNames.reduce((e,n)=>(e[n]=D.utils.sheet_to_json(t.Sheets[n]),e),{});let e=JSON.parse(this.currentUserValue.identitas),l=n.Sheet1;var i=[];l.forEach(t=>{if(null!=t.nik||null!=t.nama_lengkap||null!=t.tanggal_lahir){let a=this.buildUserName(t.no,t.nama_lengkap);var n={nik:null!=t.nik?t.nik.replace(/[\u200B-\u200D\uFEFF]/g,""):t.nik,nama_lengkap:t.nama_lengkap.replace(/['"]+/g,""),jenis_kelamin:t.jenis_kelamin,npsn:e[0].npsn,username:a.replace(",",""),password:t.tanggal_lahir,tanggal_lahir:t.tanggal_lahir};i.push(n)}}),A.a.checkMandatoryField(["no","nik","nama_lengkap","jenis_kelamin","tanggal_lahir"],l)?this.dataArrayPush=i.sort(this.GetSortOrder("nama_lengkap")):(this.dataArrayPush=null,this.msg.error("Ada field yang kurang, periksa file excel nya"))}catch(l){console.log(l),this.dataArrayPush=null,this.msg.error("File not supported")}},a.readAsBinaryString(i)}setPostData(e){var t=JSON.parse(this.currentUserValue.identitas);let n=JSON.parse(e);var a=[];n.Sheet1.forEach(e=>{if(null!=e.nik||null!=e.nama_lengkap||null!=e.tanggal_lahir){let i=this.buildUserName(e.no,e.nama_lengkap);var n={nik:null!=e.nik?e.nik.replace(/[\u200B-\u200D\uFEFF]/g,""):e.nik,nama_lengkap:e.nama_lengkap.replace(/['"]+/g,""),jenis_kelamin:e.jenis_kelamin,npsn:t[0].npsn,username:i.replace(",",""),password:e.tanggal_lahir,tanggal_lahir:e.tanggal_lahir};a.push(n)}}),this.dataArrayPush=a}buildUserName(e,t){var n=t.toLowerCase().replace(".","").trim().split(" ");let a=[];return a=1==n.length?[n[0]]:[n[0],n[1]],a.join(".").replace(/['"]+/g,"")+e+"@mydss.id"}search(){this.projectList=this.tablesvc.search(this.searchInput,this.projectListRaw)}showModal(){this.isVisible=!0}handleOk(){if(this.isOkLoading=!0,null==this.dataArrayPush)this.isOkLoading=!1,this.msg.error("Gagal Simpan!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.");else{let e={nama_fungsi:"_dss_import_gtk",in_data:JSON.stringify(this.dataArrayPush)};this.apiService.postFunction(e).subscribe(e=>{this.msg.success("Berhasil Simpan!."),this.getGuru(),this.isVisible=!1,this.isOkLoading=!1},e=>{this.isOkLoading=!1,this.msg.error("Gagal Simpan!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.")})}}handleCancel(){this.isVisible=!1}deleteItem(e){console.log(e),this.modalService.confirm({nzTitle:"Hapus data ini?",nzContent:'<b style="color: red;">Data tidak bisa dikembalikan</b>',nzOkText:"Yes",nzOkType:"danger",nzOnOk:()=>{let t={nama_fungsi:"dss.drop_gtk_by_idgtk",in_data:JSON.stringify({id_gtk:e})};this.apiService.postFunction(t).subscribe(e=>{this.msg.success("Berhasil Hapus!."),this.getGuru()},e=>{this.msg.error("Gagal Hapus!, silahkan periksa kembali data anda, dan pastikan jaringan stabil.")})},nzCancelText:"No",nzOnCancel:()=>console.log("Cancel")})}GetSortOrder(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}}}return e.\u0275fac=function(t){return new(t||e)(J["\u0275\u0275directiveInject"](F.e),J["\u0275\u0275directiveInject"](i.e),J["\u0275\u0275directiveInject"](R.b),J["\u0275\u0275directiveInject"](P.a),J["\u0275\u0275directiveInject"](L.c),J["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=J["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:38,vars:8,consts:[[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-12"],[1,"border-input",3,"nzPrefix"],["type","text","nz-input","","placeholder","Cari Data",3,"ngModel","ngModelChange"],["searchPrefix",""],[4,"ngIf"],[1,"text-md-right","m-v-10"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","upload"],["nzWidth","800","nzTitle","Buat Baru",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","","nzLayout","vertical",3,"formGroup"],["target","_blank","nzType","primary","nz-button","","href","../../../assets/files/Formula_Import_Guru.xlsx"],["nzRequired","","nzFor","id_gtk"],["nzErrorTip","Harap isi file!"],["type","file",1,"border-input",3,"change"],[1,"container-fluid"],["nz-icon","","nzType","search",1,"opacity-04"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Pilih Jenjang Sekolah",1,"border-input",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[1,"border-box"],["nzTip","Loading...",3,"nzSpinning"],["nzSize","small",3,"nzData"],["RegisteredSekolahListView",""],[4,"ngFor","ngForOf"],["listViewTable",""],["nz-icon","","nzType","contacts","nzTheme","outline"],["nz-button","","nzSize","small","nzType","primary","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){if(1&e&&(J["\u0275\u0275elementStart"](0,"div",0),J["\u0275\u0275elementStart"](1,"div",1),J["\u0275\u0275elementStart"](2,"div",2),J["\u0275\u0275elementStart"](3,"div",3),J["\u0275\u0275elementStart"](4,"div",4),J["\u0275\u0275elementStart"](5,"nz-space"),J["\u0275\u0275elementStart"](6,"nz-space-item"),J["\u0275\u0275elementStart"](7,"nz-input-group",5),J["\u0275\u0275elementStart"](8,"input",6),J["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchInput=e}))("ngModelChange",(function(){return t.search()})),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275template"](9,le,1,0,"ng-template",null,7,J["\u0275\u0275templateRefExtractor"]),J["\u0275\u0275elementEnd"](),J["\u0275\u0275template"](11,se,4,2,"ng-container",8),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](12,"div",2),J["\u0275\u0275elementStart"](13,"div",9),J["\u0275\u0275elementStart"](14,"nz-button-group"),J["\u0275\u0275elementStart"](15,"button",10),J["\u0275\u0275listener"]("click",(function(){return t.showModal()})),J["\u0275\u0275element"](16,"i",11),J["\u0275\u0275elementStart"](17,"span"),J["\u0275\u0275text"](18,"Import Data"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](19,"button",10),J["\u0275\u0275listener"]("click",(function(){return t.exportData()})),J["\u0275\u0275element"](20,"i",11),J["\u0275\u0275elementStart"](21,"span"),J["\u0275\u0275text"](22,"Export Data"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](23,"nz-modal",12),J["\u0275\u0275listener"]("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()}))("nzOnOk",(function(){return t.handleOk()})),J["\u0275\u0275elementStart"](24,"form",13),J["\u0275\u0275elementStart"](25,"nz-form-item"),J["\u0275\u0275elementStart"](26,"nz-form-label"),J["\u0275\u0275text"](27,"Download Template"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](28,"a",14),J["\u0275\u0275text"](29,"Download"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](30,"nz-form-item"),J["\u0275\u0275elementStart"](31,"nz-form-label",15),J["\u0275\u0275text"](32,"Import File"),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](33,"nz-form-control",16),J["\u0275\u0275elementStart"](34,"input",17),J["\u0275\u0275listener"]("change",(function(e){return t.onFileChange(e)})),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementEnd"](),J["\u0275\u0275elementStart"](35,"div",18),J["\u0275\u0275template"](36,me,46,7,"ng-container",8),J["\u0275\u0275template"](37,pe,27,4,"ng-container",8),J["\u0275\u0275elementEnd"]()),2&e){const e=J["\u0275\u0275reference"](10);J["\u0275\u0275advance"](7),J["\u0275\u0275property"]("nzPrefix",e),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngModel",t.searchInput),J["\u0275\u0275advance"](3),J["\u0275\u0275property"]("ngIf","002"==t.KodeRole),J["\u0275\u0275advance"](12),J["\u0275\u0275property"]("nzVisible",t.isVisible)("nzOkLoading",t.isOkLoading),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("formGroup",t.dataForm),J["\u0275\u0275advance"](12),J["\u0275\u0275property"]("ngIf","002"==t.KodeRole),J["\u0275\u0275advance"](1),J["\u0275\u0275property"]("ngIf","005"==t.KodeRole)}},directives:[U.a,U.b,O.b,O.c,O.a,i.c,i.n,i.q,K.m,d.b,G.a,d.a,q.a,B.a,L.a,i.t,i.o,_.b,i.h,H.c,_.c,H.a,_.d,_.a,w.b,K.l,w.a,m.a,M.a,S.b,S.h,S.i,S.a,S.g,S.e],styles:[""],encapsulation:2}),e})(),data:{title:"List Guru",headerDisplay:"none"}}];let ue=(()=>{class e{}return e.\u0275mod=J["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=J["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[F.i.forChild(he)],F.i]}),e})();const ge=[d.c,m.b,c.b,p.a,h.a,u.b,g.d,S.d,k.c,E.c,f.c,z.a,x.h,v.a,y.a,_.e,L.b,w.c,j.a,O.d,C.b,T.c,I.b,R.a,b.a,U.c,M.b];let Se=(()=>{class e{}return e.\u0275mod=J["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=J["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[r.a,s.a,o.a],imports:[[a.a,i.r,ue,l.a,V.LightboxModule,...ge]]}),e})()}}]);